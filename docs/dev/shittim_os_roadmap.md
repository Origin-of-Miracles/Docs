---
outline: [2, 3]
---

# Shittim OS 功能规划

> **文档状态**: Draft  
> **最后更新**: 2025-12-17

## 📊 总体进度

```
整体完成度: ░░░░░░░░░░░░░░░░░░░░ 0%
```

| 模块 | 进度 | 状态 |
|:---|:---|:---|
| 基础框架 | 0% | ⏳ 待开始 |
| MomoTalk 聊天 | 0% | ⏳ 待开始 |
| 学生信息系统 | 0% | ⏳ 待开始 |
| 委托任务系统 | 0% | ⏳ 待开始 |
| 设置与工具 | 0% | ⏳ 待开始 |

---

## 🎯 核心功能模块

### Phase 1: 基础框架 (MVP)

搭建项目骨架，实现 Minecraft 通信能力。

| 功能 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|
| 项目初始化 | P0 | ⏳ | React 18 + Vite 5 + TypeScript |
| Bridge SDK 封装 | P0 | ⏳ | 将 `bridge.js` 封装为 TypeScript 模块 |
| 类型定义 | P0 | ⏳ | 定义所有 Bridge API 类型 |
| React Hooks | P0 | ⏳ | `usePlayer`, `useGameEvent` 等 |
| 路由系统 | P0 | ⏳ | React Router 6 配置 |
| 状态管理 | P0 | ⏳ | Zustand 全局状态 |
| 主界面框架 | P0 | ⏳ | 平板 UI 外壳 + 导航栏 |
| Tailwind 配置 | P1 | ⏳ | 蔚蓝档案主题色 |

**验收标准**:
- [ ] 能在 Minecraft 内嵌浏览器中正常运行
- [ ] 能成功调用 `MiracleBridge.getPlayerInfo()`
- [ ] 能接收并显示游戏事件

---

### Phase 2: MomoTalk 聊天系统

核心功能：与学生 NPC 进行对话交互。

| 功能 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|
| 对话列表页 | P0 | ⏳ | 显示所有学生对话 |
| 学生头像组件 | P0 | ⏳ | 圆形头像 + 未读标记 |
| 对话详情页 | P0 | ⏳ | 进入单个对话 |
| 消息气泡组件 | P0 | ⏳ | 左/右气泡 + 时间戳 |
| 文本输入框 | P0 | ⏳ | 底部输入栏 + 发送按钮 |
| 消息发送 | P0 | ⏳ | 调用 Bridge API 发送消息 |
| 消息接收 | P0 | ⏳ | 监听事件接收 NPC 回复 |
| 打字机效果 | P1 | ⏳ | NPC 消息逐字显示 |
| 表情/贴纸 | P1 | ⏳ | 发送表情图片 |
| 历史记录持久化 | P1 | ⏳ | IndexedDB 本地存储 |
| 消息搜索 | P2 | ⏳ | 搜索历史消息 |

**UI 参考**:
- 列表页：左侧头像 + 右侧名称/最后消息
- 详情页：类似微信/QQ 聊天界面
- 气泡样式：圆角矩形，学生消息浅蓝，玩家消息白色

**验收标准**:
- [ ] 能显示学生列表
- [ ] 能进入对话并发送消息
- [ ] 能接收并显示 NPC 回复

---

### Phase 3: 学生信息系统

查看和管理学生数据。

| 功能 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|
| 学生列表页 | P1 | ⏳ | 卡片网格布局 |
| 学生卡片组件 | P1 | ⏳ | 头像 + 名称 + 社团 |
| 学生详情页 | P1 | ⏳ | 完整属性面板 |
| 基础属性显示 | P1 | ⏳ | 名称/年龄/社团/生日 |
| 好感度显示 | P1 | ⏳ | 进度条 + 等级 |
| 技能列表 | P2 | ⏳ | EX/普攻/被动技能 |
| 立绘展示 | P2 | ⏳ | 高清立绘图片 |
| 定位功能 | P2 | ⏳ | 显示学生在地图上的位置 |
| 召唤功能 | P3 | ⏳ | 将学生传送到玩家身边 |
| 筛选/排序 | P2 | ⏳ | 按社团/好感度筛选 |

**数据结构**:
```typescript
interface Student {
  id: string;
  name: string;
  nameJP: string;
  club: string;
  school: string;
  birthday: string;
  age: number;
  height: number;
  affection: number;        // 好感度 0-100
  affectionLevel: number;   // 羁绊等级 1-10
  position?: { x: number; y: number; z: number };
  avatar: string;
  portrait: string;         // 立绘
}
```

---

### Phase 4: 委托任务系统

动态生成的日常/周常任务。

| 功能 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|
| 任务列表页 | P1 | ⏳ | 日常/周常分类 Tab |
| 任务卡片组件 | P1 | ⏳ | 标题 + 奖励 + 进度 |
| 任务详情页 | P1 | ⏳ | 完整目标描述 |
| 任务状态 | P1 | ⏳ | 进行中/已完成/可领取 |
| 奖励显示 | P1 | ⏳ | 物品图标 + 数量 |
| 进度追踪 | P1 | ⏳ | 实时更新进度 |
| 领取奖励 | P1 | ⏳ | 调用 Bridge API |
| HUD 任务追踪 | P2 | ⏳ | 在游戏画面显示当前任务 |
| 任务通知 | P2 | ⏳ | 任务完成时弹窗提示 |

**任务类型**:
- **日常**: 每日重置，如"采集10个小麦"、"击杀5个僵尸"
- **周常**: 每周重置，如"完成3次副本"
- **特殊**: 节日限定任务

---

### Phase 5: 设置与工具

系统设置和辅助功能。

| 功能 | 优先级 | 状态 | 说明 |
|:---|:---|:---|:---|
| 设置页面 | P2 | ⏳ | 分组设置项 |
| 音量控制 | P2 | ⏳ | 背景音乐/音效 滑块 |
| 语言切换 | P2 | ⏳ | 中文/日文/英文 |
| 主题切换 | P3 | ⏳ | 浅色/深色模式 |
| 通知设置 | P2 | ⏳ | 开关各类通知 |
| 关于页面 | P3 | ⏳ | 版本信息/致谢 |
| 内置小游戏 | P3 | ⏳ | 休闲小游戏 |
| 日历功能 | P3 | ⏳ | 查看学生生日等 |

---

## 📅 里程碑

### v0.1.0-alpha (目标: 基础可用)

- [ ] 项目结构搭建
- [ ] Bridge SDK TypeScript 封装
- [ ] 主界面框架 (导航栏 + 路由)
- [ ] MomoTalk 基础聊天 (发送/接收)

### v0.2.0-alpha (目标: 核心功能)

- [ ] MomoTalk 完善 (历史记录、打字机效果)
- [ ] 学生列表与详情页
- [ ] 好感度显示

### v0.3.0-alpha (目标: 任务系统)

- [ ] 委托任务列表
- [ ] 任务详情与进度
- [ ] 奖励领取

### v0.4.0-beta (目标: 完善体验)

- [ ] UI 动画优化
- [ ] 设置页面
- [ ] 性能优化

---

## 🎨 设计规范

### 色彩系统

| 名称 | 色值 | 用途 |
|:---|:---|:---|
| Primary | `#3b82f6` | 主色调、按钮、链接 |
| Primary Light | `#60a5fa` | 悬停状态 |
| Secondary | `#f0f9ff` | 背景色 |
| Accent | `#fbbf24` | 强调、徽章 |
| Text | `#1e293b` | 主文字 |
| Text Muted | `#64748b` | 次要文字 |
| Border | `#e2e8f0` | 边框 |
| Success | `#22c55e` | 成功状态 |
| Warning | `#f59e0b` | 警告状态 |
| Error | `#ef4444` | 错误状态 |

### 字体

- **主字体**: Noto Sans SC (思源黑体)
- **等宽字体**: JetBrains Mono
- **字号**: 12px / 14px / 16px / 18px / 24px / 32px

### 圆角

- 小组件: `4px`
- 按钮/卡片: `8px`
- 对话框: `12px`
- 大容器: `16px`

### 动画

- **时长**: 150ms (快) / 300ms (中) / 500ms (慢)
- **缓动**: `ease-out` (进入) / `ease-in` (退出)
- **页面切换**: 滑入/淡入组合

---

## 🔗 依赖 Bridge API

Shittim OS 需要以下 Miracle Bridge API 支持：

### 已实现 ✅

| API | 说明 |
|:---|:---|
| `getPlayerInfo` | 获取玩家信息 |
| `getInventory` | 获取背包 |
| `teleport` | 传送玩家 |
| `sendChat` | 发送聊天 |
| `executeCommand` | 执行命令 |
| `player:*` 事件 | 玩家事件 |
| `entity:*` 事件 | 实体事件 |

### 待实现 ⏳

| API | 说明 | 所需模块 |
|:---|:---|:---|
| `getStudents` | 获取学生列表 | 学生系统 |
| `getStudentInfo` | 获取学生详情 | 学生系统 |
| `sendMessageToStudent` | 向学生发送消息 | MomoTalk |
| `student:message` 事件 | 学生消息事件 | MomoTalk |
| `getTasks` | 获取任务列表 | 任务系统 |
| `claimTaskReward` | 领取任务奖励 | 任务系统 |
| `task:complete` 事件 | 任务完成事件 | 任务系统 |

---

## 📝 更新日志

### 2025-12-17

- 📝 创建功能规划文档
- 📝 定义 5 个开发阶段
- 📝 添加设计规范

---

:::tip 参与贡献
功能规划持续更新中，欢迎在 [GitHub Issues](https://github.com/Origin-of-Miracles/Shittim-OS/issues) 提出建议。
:::
